---
const categories = [
    { id: 'verduras', name: 'Verduras y Frutas', icon: 'ðŸ¥¬' },
    { id: 'carnes', name: 'Carnes y Pescados', icon: 'ðŸ¥©' },
    { id: 'lacteos', name: 'LÃ¡cteos', icon: 'ðŸ¥›' },
    { id: 'granos', name: 'Granos y Cereales', icon: 'ðŸŒ¾' },
    { id: 'otros', name: 'Otros', icon: 'ðŸ›’' }
];
---

<div class="space-y-6">
    <!-- Week/Month Selector -->
    <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">PerÃ­odo</label>
        <select class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
            <option value="week">Esta semana</option>
            <option value="next-week">PrÃ³xima semana</option>
            <option value="month">Este mes</option>
        </select>
    </div>

    <!-- Shopping Categories -->
    <div class="space-y-4">
        {categories.map(category => (
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                    <button class="category-header w-full p-4 text-left flex items-center justify-between hover:bg-gray-50" data-category={category.id}>
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">{category.icon}</span>
                            <div>
                                <h3 class="font-medium text-gray-900">{category.name}</h3>
                                <p class="text-sm text-gray-600">0 productos</p>
                            </div>
                        </div>
                        <svg class="w-5 h-5 text-gray-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>

                    <div class="category-content hidden p-4 border-t border-gray-200 bg-gray-50">
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium text-gray-700">Productos</span>
                                <button class="add-item-btn text-green-600 text-sm hover:text-green-800" data-category={category.id}>
                                    + Agregar producto
                                </button>
                            </div>

                            <div class="items-list space-y-2">
                                <!-- Items will be added here -->
                            </div>
                        </div>
                    </div>
                </div>
        ))}
    </div>

</div>

<script>
    // Toggle category sections
    document.querySelectorAll('.category-header').forEach(header => {
        header.addEventListener('click', () => {
            const content = header.nextElementSibling;
            const arrow = header.querySelector('svg');

            content?.classList.toggle('hidden');
            arrow?.classList.toggle('rotate-180');
        });
    });

    // Add item functionality
    document.querySelectorAll('.add-item-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const categoryId = btn.dataset.category;
            const itemsList = btn.closest('.category-content')?.querySelector('.items-list');

            const itemDiv = document.createElement('div');
            itemDiv.className = 'flex items-center space-x-3 p-3 bg-white rounded border';
            itemDiv.innerHTML = `
        <input type="checkbox" class="w-4 h-4 text-green-600 rounded">
        <input type="text" placeholder="Nombre del producto" class="flex-1 p-2 border border-gray-300 rounded text-sm">
        <input type="text" placeholder="Cantidad" class="w-24 p-2 border border-gray-300 rounded text-sm">
        <button class="text-red-500 hover:text-red-700 text-sm" onclick="this.parentElement.remove()">Ã—</button>
      `;

            itemsList?.appendChild(itemDiv);

            // Update counter
            const counter = header.querySelector('p');
            const currentCount = parseInt(counter?.textContent?.split(' ')[0] || '0');
            if (counter) {
                counter.textContent = `${currentCount + 1} productos`;
            }
        });
    });
</script>
